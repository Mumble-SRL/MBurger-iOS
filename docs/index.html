<!DOCTYPE html>
<html lang="en">
  <head>
    <title>NookoSDK  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="NookoSDK  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">NookoSDK Docs</a> (100% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">NookoSDK Reference</a>
        <img id="carat" src="img/carat.png" />
        NookoSDK  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="NKManager.html">NKManager</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/NKManager.html">NKManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKPaginationInfo.html">NKPaginationInfo</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="NKParameter.html">NKParameter</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/NKParameter.html">NKParameter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKSortParameter.html">NKSortParameter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKPaginationParameter.html">NKPaginationParameter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKFilterParameter.html">NKFilterParameter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKGeofenceParameter.html">NKGeofenceParameter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKGeneralParameter.html">NKGeneralParameter</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="NKProject.html">NKProject</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/NKProject.html">NKProject</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="NKBlock.html">NKBlock</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/NKBlock.html">NKBlock</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="NKSection.html">NKSection</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/NKSection.html">NKSection</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="NKElement.html">NKElement</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/NKElement.html">NKElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKTextElement.html">NKTextElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKImagesElement.html">NKImagesElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKImage.html">NKImage</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKMediaElement.html">NKMediaElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKFile.html">NKFile</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKCheckboxElement.html">NKCheckboxElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKWysiwygElement.html">NKWysiwygElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKDateElement.html">NKDateElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKAddressElement.html">NKAddressElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKDropdownElement.html">NKDropdownElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKPollElement.html">NKPollElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKGeneralElement.html">NKGeneralElement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKElementFactory.html">NKElementFactory</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="NKApiManager.html">NKApiManager</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/NKApiManager.html">NKApiManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NKResponse.html">NKResponse</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Enums.html">Other Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/NKElementType.html">NKElementType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/NKHTTPMethod.html">NKHTTPMethod</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/NKMediaType.html">NKMediaType</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p align="center" >
<img src="https://mumbleideas.it/wp-content/uploads/2017/12/Mumble-anim-300.gif" alt="Mumble Logo" title="Mumble Logo">
</p>
<h1 id='noookosdk' class='heading'>NoookoSDK</h1>

<p>NookoSDK is a client libary, written in Objective-C, that can be used to interact with the <a href="https://nooko2.mumbleserver.it/login">Nooko</a> API. The minimum deplaoyment target for the library is iOS 10.0.</p>

<blockquote>
<p>Even this is a library written in Objective-C it can be integrated and used also in Swift projects. The example code below will be in both languages.</p>
</blockquote>
<h1 id='installation' class='heading'>Installation</h1>
<h1 id='installation-with-cocoapods' class='heading'>Installation with CocoaPods</h1>

<p>CocoaPods is a dependency manager for iOS, which automates and simplifies the process of using 3rd-party libraries in your projects. You can install CocoaPods with the following command:</p>
<pre class="highlight plaintext"><code>$ gem install cocoapods
</code></pre>

<p>To integrate the NookoSDK into your Xcode project using CocoaPods, specify it in your Podfile:</p>
<pre class="highlight plaintext"><code>platform :ios, '10.0'

target 'TargetName' do
    pod 'NookoSDK', git: 'https://gitlab.mumbleserver.it/iOS/NookoSDK'
end
</code></pre>

<p>If you use Swift rememember to add <code>use_frameworks!</code> before the pod declaration.</p>

<p>Then, run the following command:</p>
<pre class="highlight plaintext"><code>$ pod install
</code></pre>

<p>CocoaPods is the preferred methot to install the library.</p>
<h1 id='manual-installation' class='heading'>Manual installation</h1>

<p>To install the library manually drag and drop the folder <code>NookoSDK</code> to your project structure in XCode. </p>

<p>Note that <code>NookoSDK</code> has <code>AFNetworking (3.0)</code> as a dependency, so you have to install also this library.</p>
<h1 id='initialization' class='heading'>Initialization</h1>

<p>To initialize the SDK you have to create a token through the <a href="https://nooko2.mumbleserver.it/">dashboard</a>. Click on the settings icon on the top-right and create a API Key specifiyng the permissions.</p>

<p><img src="https://gitlab.mumbleserver.it/iOS/NookoSDK/raw/master/Images/api_token.png" alt="Dashboard image"></p>

<p>In your <code>AppDelegate</code> <code>application:didFinishLaunchingWithOptions:</code> initialize the SDK like the following:</p>

<p><strong>Objective-c</strong>:</p>
<pre class="highlight objective_c"><code><span class="cp">#import "AppDelegate.h"
#import "NookoSDK.h"
</span>
<span class="k">@interface</span> <span class="nc">AppDelegate</span> <span class="p">()</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">AppDelegate</span>


<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>

    <span class="p">[</span><span class="n">NKManager</span> <span class="nf">sharedManager</span><span class="p">].</span><span class="n">apiToken</span> <span class="o">=</span> <span class="s">@"YOUR_API_TOKEN"</span><span class="p">;</span>

    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p><strong>Swift</strong>:</p>
<pre class="highlight plaintext"><code>import NookoSDK

...

func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
        NKManager.shared().apiToken = "YOUR_API_TOKEN"
    return true
}
</code></pre>

<p>You will not be able to interact with the SDK if you don&rsquo;t initialize it with a correct token/key.</p>
<h1 id='usage' class='heading'>Usage</h1>

<p>All the interactions with the SDK will be trought the <code><a href="Classes/NKManager.html">NKManager</a></code> singleton class. All the api calls have a plurarl/singular version so for example you can retrieve the list of blocks of the project or you can retrieve a single block giving its id.</p>
<h1 id='project' class='heading'>Project</h1>

<p>You can retrieve the informations of the project like this:</p>

<p><strong>Objective-C</strong>:</p>
<pre class="highlight plaintext"><code>[[NKManager sharedManager] getProjectWithSuccess:^(NKProject *project) {

} Failure:^(NSError *error) {
    NSLog(@"There was an error: %@", error.localizedDescription);
}];
</code></pre>

<p><strong>Swift</strong>:</p>
<pre class="highlight plaintext"><code>NKManager.shared().getProjectWithSuccess({ (project) in

    }) {(error) in

}
</code></pre>
<h1 id='blocks' class='heading'>Blocks</h1>

<p>You can retrieve the blocks of the project with the function <code>getBlocksWithParameters:Success:Failure</code> like this:</p>

<p><strong>Objective-C</strong>:</p>
<pre class="highlight plaintext"><code>[[NKManager sharedManager] getBlocksWithParameters:nil Success:^(NSArray&lt;NKBlock *&gt; *blocks, NKPaginationInfo *pagintaionInfo) {

} Failure:^(NSError *error) {

}];
</code></pre>

<p><strong>Swift</strong>:</p>
<pre class="highlight plaintext"><code>NKManager.shared().getBlocksWith(nil, success: { (blocks, paginationInfos) in

}) { (error) in

}
</code></pre>

<p>The parameter <code>parameters</code> is an optional array of objects that conforms to the <code><a href="Protocols/NKParameter.html">NKParameter</a></code> protocol passed to the nooko api as parameter. The majorityof the parameters that can be passed to the apis are already defined in the SDK and can be used after the initialization:</p>

<ul>
<li><code><a href="Classes/NKSortParameter.html">NKSortParameter</a></code></li>
<li><code><a href="Classes/NKPaginationParameter.html">NKPaginationParameter</a></code></li>
<li><code><a href="Classes/NKFilterParameter.html">NKFilterParameter</a></code></li>
<li><code><a href="Classes/NKGeofenceParameter.html">NKGeofenceParameter</a></code></li>
</ul>

<p>If you want to pass another type of parameter you can use the <code><a href="Classes/NKGeneralParameter.html">NKGeneralParameter</a></code> class that can be initialized with a key and a value that will be passed to the apis.</p>

<p>So if you want to include a pagination parameter you can do like this:</p>

<p><strong>Objective-C</strong>:</p>
<pre class="highlight plaintext"><code>NKPaginationParameter *paginationParam = [[NKPaginationParameter alloc] initWithSkip:0 Take:10];
[[NKManager sharedManager] getBlocksWithParameters:@[paginationParam] Success:^(NSArray&lt;NKBlock *&gt; *blocks, NKPaginationInfo *pagintaionInfo) {

} Failure:^(NSError *error) {

}];
</code></pre>

<p><strong>Swift</strong>:</p>
<pre class="highlight plaintext"><code>let paginationParam = NKPaginationParameter(skip: 0, take: 10)
NKManager.shared().getBlocksWith([paginationParam], success: { (blocks, paginationInfos) in

}) { (error) in

}
</code></pre>

<p>There are two other versions of the <code>getBlocksWithParameters:Success:Failure</code>, one that take an adiitional parameter <code>includingSections</code> (a boolean that indicate whether or not include, for each block, the sections), and another that takes <code>includingSections</code> and <code>includeElements</code> (a boolean value that do the same thing but for the elements of the sections).</p>

<p>So you could retrieve the informations of all the blocks, all the sections of the blocks and all the elements of the sections with this call:</p>

<p><strong>Objective-C</strong>:</p>
<pre class="highlight plaintext"><code>[[NKManager sharedManager] getBlocksWithParameters:nil IncludingSections:TRUE AndElements: TRUE Success:^(NSArray&lt;NKBlock *&gt; *blocks, NKPaginationInfo *pagintaionInfo) {

} Failure:^(NSError *error) {

}];
</code></pre>

<p><strong>Swift</strong>:</p>
<pre class="highlight plaintext"><code>NKManager.shared().getBlocksWith(nil, includingSections: true, andElements: true, success: { (blocks, paginationInfos) in

}) { (error) in

}
</code></pre>
<h1 id='sections' class='heading'>Sections</h1>

<p>You can retrieve all the sections with a block with the given id with the function <code>getBlocksWithParameters:Success:Failure</code> like this:</p>

<p><strong>Objective-C</strong>:</p>
<pre class="highlight plaintext"><code>[[NKManager sharedManager] getSectionsWithBlockId:THE_BLOCK_ID Parameters:nil Success:^(NSArray&lt;NKSection *&gt; *sections, NKPaginationInfo *pagintaionInfo) {

} Failure:^(NSError *error) {

}];
</code></pre>

<p><strong>Swift</strong>:</p>
<pre class="highlight plaintext"><code>NKManager.shared().getSectionsWithBlockId(THE_BLOCK_ID, parameters: nil, success: { (sections, paginationInfos) in

}) { (error) in

} 
</code></pre>

<p>Like for the blocks there&rsquo;s a version of this function that takes a bool <code>includeElements</code> that indicate to include or not the elements of the section se if you want to retrieve all the sections of a block and their elements you can call:</p>

<p><strong>Objective-C</strong>:</p>
<pre class="highlight plaintext"><code>[[NKManager sharedManager] getSectionsWithBlockId:THE_BLOCK_ID IncludeElement:TRUE Parameters:nil Success:^(NSArray&lt;NKSection *&gt; *sections, NKPaginationInfo *pagintaionInfo) {

} Failure:^(NSError *error) {

}];
</code></pre>

<p><strong>Swift</strong>:</p>
<pre class="highlight plaintext"><code>NKManager.shared().getSectionsWithBlockId(THE_BLOCK_ID, parameters: nil, includeElements: true, success: { (sections, paginationInfos) in

}) { (error) in

}
</code></pre>
<h1 id='object-mapping' class='heading'>Object mapping</h1>

<p>The <code><a href="Classes/NKSection.html">NKSection</a></code> class has a commodity function that can be used to map the elements of the section to a custom object created by you. For Exaple if you have a <code>News</code> object like this</p>
<pre class="highlight objective_c"><code><span class="cp">#import &lt;Foundation/Foundation.h&gt;
</span>
<span class="k">@interface</span> <span class="nc">News</span> <span class="p">:</span> <span class="nc">NSObject</span>

<span class="k">@property</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">title</span><span class="p">;</span>
<span class="k">@property</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">content</span><span class="p">;</span>
<span class="k">@property</span> <span class="n">NSURL</span> <span class="o">*</span><span class="n">imageUrl</span><span class="p">;</span>
<span class="k">@property</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">link</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre>

<p>And a block in Nooko that represent a newsfeed you could create and populate an array of news object like this:</p>
<pre class="highlight plaintext"><code>NSInteger newsBlockId = 12;
NSDictionary *mappingDictionary = @{@"title" : @"title",
                                    @"content" : @"content",
                                    @"image.firstImage.url" : @"imageUrl",
                                    @"link" : @"link"};
NSMutableArray *newsArray = [[NSMutableArray alloc] init];
[[NKManager sharedManager] getBlockWithBlockId:newsBlockId Parameters:nil IncludingSections:YES AndElements:YES Success:^(NKBlock *block) {
   NSMutableArray *newsArray = [[NSMutableArray alloc] init];
   for (NKSection *section in block.sections){
        News *n = [[News alloc] init];
        [section mapElementsToObject:n withMapping:mappingDictionary];
        [newsArray addObject:n];
    }
 } Failure:^(NSError * _Nonnull error) {
    [self showError:error];
 }];
</code></pre>

<p>As you can see in the example you can point to the property of the object using the dot notation. If it&rsquo;s not defined any property the SDK will use the value of the element object (calling the value function).</p>

<p>You can find a complete example in the Example project.</p>
<h1 id='serialization' class='heading'>Serialization</h1>

<p>All the model objects implement the <code>NSCoding</code> and <code>NSSecureCoding</code> protocol so you can serialize and deserialize them without having to implement it. Below the list of objects that implement those protocols</p>

<ul>
<li><code><a href="Classes/NKProject.html">NKProject</a></code></li>
<li><code><a href="Classes/NKBlock.html">NKBlock</a></code></li>
<li><code><a href="Classes/NKSection.html">NKSection</a></code></li>
<li><code><a href="Classes/NKElement.html">NKElement</a></code></li>
<li><code><a href="Classes/NKTextElement.html">NKTextElement</a></code></li>
<li><code><a href="Classes/NKImagesElement.html">NKImagesElement</a></code></li>
<li><code><a href="Classes/NKImage.html">NKImage</a></code></li>
<li><code><a href="Classes/NKMediaElement.html">NKMediaElement</a></code></li>
<li><code><a href="Classes/NKFile.html">NKFile</a></code></li>
<li><code><a href="Classes/NKCheckboxElement.html">NKCheckboxElement</a></code></li>
<li><code><a href="Classes/NKWysiwygElement.html">NKWysiwygElement</a></code></li>
<li><code><a href="Classes/NKDateElement.html">NKDateElement</a></code></li>
<li><code><a href="Classes/NKAddressElement.html">NKAddressElement</a></code></li>
<li><code><a href="Classes/NKDropdownElement.html">NKDropdownElement</a></code></li>
<li><code><a href="Classes/NKPollElement.html">NKPollElement</a></code></li>
<li><code><a href="Classes/NKGeneralElement.html">NKGeneralElement</a></code></li>
</ul>
<h1 id='equality' class='heading'>Equality</h1>

<p>All the model objects implement the <code>isEqual:</code> function based on the corresponding id. So for example an NKSection will result equal to another NKSection object if they have the same <code>sectionId</code>.</p>
<h1 id='documentation' class='heading'>Documentation</h1>

<p>For further information, you can check out the full SDK Reference in the <a href="https://gitlab.mumbleserver.it/iOS/NookoSDK/tree/master/docs">docs</a> folder.</p>
<h1 id='contacts' class='heading'>Contacts</h1>

<p>You can contuct us at <a href="mailto:https://gitlab.mumbleserver.it/iOS/NookoSDK/raw/master/LICENSE">info@mumbleideas.it</a>.</p>
<h1 id='license' class='heading'>License</h1>

<p>NookoSDK is released under the MIT license. See <a href="https://gitlab.mumbleserver.it/iOS/NookoSDK/raw/master/LICENSE">LICENSE</a> for details.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="https://mumbleideas.it/" target="_blank" rel="external">Mumble</a>. All rights reserved. (Last updated: 2018-04-23)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.1</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
